<!DOCTYPE html>
<html lang="en"><head>
<script src="data_management_files/libs/clipboard/clipboard.min.js"></script>
<script src="data_management_files/libs/quarto-html/tabby.min.js"></script>
<script src="data_management_files/libs/quarto-html/popper.min.js"></script>
<script src="data_management_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="data_management_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="data_management_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="data_management_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.42">

  <title>data_management</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="data_management_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="data_management_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="data_management_files/libs/revealjs/dist/theme/quarto-87abec656e2e6915e4522032b718c7a1.css">
  <link href="data_management_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="data_management_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="data_management_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="data_management_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="data_management_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="data_management_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section>
<section id="data-management" class="title-slide slide level1 center">
<h1>Data management</h1>
<p>In neuroimaging</p>
</section>
<section id="general" class="slide level2">
<h2>General</h2>
<p><img data-src="images/clipboard-3125101888.png"></p>

<aside><div>
<p><span class="citation" data-cites="juavinett2022">(<a href="#/references" role="doc-biblioref" onclick="">Juavinett 2022</a>)</span></p>
</div></aside></section>
<section id="state-in-2022" class="slide level2">
<h2>State in 2022</h2>
<p><img data-src="images/clipboard-572345686.png"></p>

<aside><div>
<p>Image credit: <span class="citation" data-cites="juavinett2022">(<a href="#/references" role="doc-biblioref" onclick="">Juavinett 2022</a>)</span></p>
</div></aside></section>
<section id="bids" class="slide level2">
<h2>BIDS</h2>
<iframe width="780" height="500" src="https://bids.neuroimaging.io/index.html" title="BIDS official website"></iframe>

<img data-src="images/clipboard-4264973894.png" class="r-stretch"></section></section>
<section>
<section id="psychopy" class="title-slide slide level1 center">
<h1>1. Psychopy</h1>

</section>
<section id="bids-plugin-for-psychopy" class="slide level2">
<h2>BIDS plugin for PsychoPy</h2>
<p>Should be installed and enabled to save events (conditions and button presses) in a comprehensive and standardized manner.</p>
<p><img data-src="images/clipboard-4271384204.png"></p>
<p>This will also make our data analysis easier</p>

<aside><div>
<p><a href="https://psychopy-bids.readthedocs.io/en/stable/" class="uri">https://psychopy-bids.readthedocs.io/en/stable/</a></p>
</div></aside></section>
<section id="installation" class="slide level2">
<h2>Installation</h2>

<img data-src="images/clipboard-3969700235.png" class="r-stretch"><aside class="notes">
<p>Open psychopy and press “Get more” on the right side. Alternatively you can open “plugin/pachages manager” via “Tools” menue. Psychopy-plugin should be listed among the available plugins.</p>
<p>On the university computers, bids plugin is available through software center.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="experiment-adjustmentdata_management-1" class="title-slide slide level1 center scrollable">
<h1>Experiment adjustment<sup>1</sup></h1>

<aside><ol class="aside-footnotes"><li id="fn1"><p>valid for PsychoPy v2024.2.4</p></li></ol></aside></section>
<section id="thanks-to" class="slide level2">
<h2>Thanks to</h2>

<img data-src="images/clipboard-3961870448.png" class="r-stretch"><p>Lukas currently took over the BIDS plugin development.</p>
</section>
<section id="properties" class="slide level2 scrollable">
<h2>Properties</h2>

<img data-src="images/clipboard-3648775932.png" class="r-stretch"><aside class="notes">
<ol type="1">
<li>Experiment name will correspond to the task-[taskname] properety in the bids dataset. It is therefore useful to have a short name without capital letters. This did not work on my mac, but maybe this is an OS issue?</li>
<li>Participant: switched from random code generator to 001. Since we keep the naming consistent with the MRI dataset, and have multiple runs, it is not useful to generate a new code on every run repetition</li>
<li>Session: changed from 001 to 1. This is just our naming convention. Nobody has hundreds of sessions, so we do not expect a number with more than two digits.</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="renaming" class="slide level2">
<h2>Renaming?</h2>
<h3 id="file">File</h3>
<p><img data-src="images/clipboard-2219598044.png"></p>
<h3 id="project-folder">Project folder</h3>
<p><img data-src="images/clipboard-1865608280.png"></p>
<aside class="notes">
<p>For the task label to work properly in the BIDS plugin, I also tried renaming the experiment file and the folder, but this did not help. Gambling is still spelled out with a capital “G” no mater what I do. Let’s stay tuned for the psychopy-bids updates.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="research-question" class="slide level2">
<h2>Research question</h2>
<h3 id="what-information-do-we-actually-need-for-analysis">What information do we actually need for analysis?</h3>

<img data-src="images/clipboard-1090987086.png" class="r-stretch"><aside class="notes">
<p>We should keep the research question in mind.</p>
<p>H1 is formulated as a one-way ANOVA with three pairwise post-hoc tests</p>
<p>H2 is formulated as 2x2 two-way ANOVA (at least we will simplify it to that)</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="unique-conditions" class="slide level2">
<h2>Unique conditions</h2>
<ul>
<li class="fragment"><p>small win</p></li>
<li class="fragment"><p>small loss</p></li>
<li class="fragment"><p>large win</p></li>
<li class="fragment"><p>large loss</p></li>
<li class="fragment"><p>pass</p></li>
</ul>
</section>
<section id="trials.xlsx" class="slide level2">
<h2>trials.xlsx</h2>

<img data-src="images/clipboard-752105472.png" class="r-stretch"><aside class="notes">
<p>For every trial, we should be able to identify whether it is win, loss or pass.</p>
<p>For every win or loss trial, we need to know if it is a win/loss with high stakes or with low stakes.</p>
<p>Note: right now we are not taking the win probability into account, but we know that it is always low for large stakes, and large for low stakes, so it is redundant.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="side-note" class="slide level2">
<h2>Side note:</h2>
<h3 id="ideal-paradigm">Ideal paradigm</h3>
<ul>
<li class="fragment"><p>Each trial type appears the same number of times</p></li>
<li class="fragment"><p>Carryover counterbalancing - each condition is equally likely to be preceded by each other condition <span class="citation" data-cites="brooks2012">(<a href="#/references" role="doc-biblioref" onclick="">Brooks 2012</a>)</span></p></li>
</ul>
</section>
<section id="events-of-interest-in-a-trial" class="slide level2">
<h2>Events of interest in a trial</h2>
<h3 id="gamble_trial-or-gamble_outcome">gamble_trial or gamble_outcome?</h3>

<img data-src="images/clipboard-3778340065.png" class="r-stretch"><h3 id="do-we-need-key-presses">Do we need key presses?</h3>
</section>
<section id="adding-bids-events" class="slide level2">
<h2>Adding bids events</h2>
<h3 id="scanner-trigger">Scanner trigger</h3>

<img data-src="images/clipboard-3535149556.png" class="r-stretch"><p>I am not sure if it is needed after all, but I added a bids component to a routine that waits 10 seconds after the scanner trigger and logged its onset.</p>
</section>
<section id="linking-to-a-routine-1" class="slide level2">
<h2>Linking to a routine # 1</h2>

<img data-src="images/clipboard-2395359737.png" class="r-stretch"><aside class="notes">
<p>In the BIDS Event Type field you can choose between TaskEvent and BehEvent. For now the difference does not matter much, let’s choose task event.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="linking-to-a-routine-2" class="slide level2">
<h2>Linking to a routine #2</h2>

<img data-src="images/clipboard-674558866.png" class="r-stretch"><p>Right now time 0 in our experiment is the start of the welcome screen. We want time 0 to be the scanner trigger. Will take care of it later.</p>
</section>
<section id="adding-bids-events-of-interest" class="slide level2">
<h2>Adding bids events of interest</h2>
<h3 id="new-variable-outcome_trial">New variable outcome_trial</h3>
<p>We need one variable to take 3 possible outcomes: win, loss or pass. Therefore, I adjusted the code, adding a variable “outcome_trial” for this purpose.</p>

<img data-src="images/clipboard-347898199.png" class="r-stretch"></section>
<section id="points_text" class="slide level2">
<h2>points_text</h2>

<img data-src="images/clipboard-182415314.png" class="r-stretch"><aside class="notes">
<p>We are creating a bids event and linking it to points_text within the trial (because this routine appears on every loop interation).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="time-stamp" class="slide level2">
<h2>Time stamp</h2>
<h3 id="time-0---scanning-onset">Time 0 - scanning onset</h3>

<img data-src="images/clipboard-3405507570.png" class="r-stretch"><aside class="notes">
<p>Now we want to adjust the onset time to the scanner trigger arrival. This is done by ticking “Manually set values” and putting the difference between the onset of the current routine and the start of the blank period.</p>
<p>It would have been better and more accurate to subtract the actually key press time, but I ran out of time.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="other-events" class="slide level2">
<h2>Other events</h2>

<img data-src="images/clipboard-3834157527.png" class="r-stretch"><aside class="notes">
<p>Here I added two other bids events that may or may not be useful, just in case: Trial onset and key press, including reaction times.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="bids-export" class="slide level2 scrollable">
<h2>BIDS export</h2>

<img data-src="images/clipboard-1613912465.png" class="r-stretch"><p>It is important to add the bidsExport routine at the end of the experiment.</p>
<ol type="1">
<li class="fragment">For fMRI, the data type should be “func”</li>
<li class="fragment">Choose. your favourite license</li>
<li class="fragment">Tick the box “Add Run Nubmers” - this should attach run numbers to the file names in bids format for every new run. I did not get it to work properly on mac (it was always run 1, overwriting the previous file). But supposedly it works on windows and linux.</li>
</ol>
</section>
<section id="complete-bids-dataset" class="slide level2">
<h2>Complete BIDS dataset</h2>
<h3 id="example">Example</h3>

<img data-src="images/clipboard-806437960.png" class="r-stretch"><aside class="notes">
<p>This is how a complete dataset for fmri analysis should look like. You should have functional _bold.nii.gz files and _events.tsv files in one func/ folder.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="dicom-to-bids" class="title-slide slide level1 center">
<h1>2. DICOM to BIDS</h1>

</section>
<section id="neurodesk" class="slide level2">
<h2>Neurodesk</h2>

<img data-src="images/clipboard-3392567157.png" class="r-stretch"></section>
<section id="mri-data-formats" class="slide level2">
<h2>MRI data formats</h2>
<ul>
<li class="fragment"><p>DICOM - medical image format</p>
<ul>
<li class="fragment">.dcm .ima or nothing at all</li>
</ul></li>
<li class="fragment"><p>NIFTI - neuroimaging format we work with</p>
<ul>
<li class="fragment">.nii or .nii.gz</li>
</ul></li>
</ul>
</section>
<section id="bidscoin" class="slide level2">
<h2>bidscoin</h2>

<img data-src="images/clipboard-404437105.png" class="r-stretch"></section>
<section id="shell-commands" class="slide level2">
<h2>Shell commands</h2>

<img data-src="images/clipboard-1623492321.png" class="r-stretch"><div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href=""></a><span class="co">#!/bin/bash</span></span>
<span id="cb1-2"><a href=""></a></span>
<span id="cb1-3"><a href=""></a><span class="co"># you can copypaste the following commands into the terminal window that is opened by BIDSCOINER</span></span>
<span id="cb1-4"><a href=""></a></span>
<span id="cb1-5"><a href=""></a><span class="co"># define directories</span></span>
<span id="cb1-6"><a href=""></a><span class="va">sourceFolder</span><span class="op">=</span>/home/jovyan/completion2/dcm</span>
<span id="cb1-7"><a href=""></a><span class="va">sortedFolder</span><span class="op">=</span>/home/jovyan/completion2/dcm_sorted</span>
<span id="cb1-8"><a href=""></a></span>
<span id="cb1-9"><a href=""></a><span class="co"># check the output of the source folder</span></span>
<span id="cb1-10"><a href=""></a><span class="fu">ls</span> <span class="at">-l</span> <span class="va">$sourceFolder</span></span>
<span id="cb1-11"><a href=""></a></span>
<span id="cb1-12"><a href=""></a><span class="co"># make the target directory with subdirectories</span></span>
<span id="cb1-13"><a href=""></a><span class="fu">mkdir</span> <span class="at">-p</span> <span class="va">$sortedFolder</span></span>
<span id="cb1-14"><a href=""></a></span>
<span id="cb1-15"><a href=""></a><span class="co"># change to the script folder</span></span>
<span id="cb1-16"><a href=""></a><span class="bu">cd</span> /home/jovyan/dicomsort/</span>
<span id="cb1-17"><a href=""></a></span>
<span id="cb1-18"><a href=""></a><span class="co"># run the script</span></span>
<span id="cb1-19"><a href=""></a><span class="ex">./DICOMsort.sh</span> <span class="va">$sourceFolder</span> <span class="va">$sortedFolder</span></span>
<span id="cb1-20"><a href=""></a></span>
<span id="cb1-21"><a href=""></a><span class="co"># check the output of the target folder</span></span>
<span id="cb1-22"><a href=""></a><span class="fu">ls</span> <span class="at">-l</span> <span class="va">$sortedFolder</span></span>
<span id="cb1-23"><a href=""></a></span>
<span id="cb1-24"><a href=""></a><span class="co"># run bidsmapper</span></span>
<span id="cb1-25"><a href=""></a><span class="ex">bidsmapper</span> <span class="va">$sortedFolder</span> /home/jovyan/completion2/bids</span>
<span id="cb1-26"><a href=""></a><span class="co"># note: in the intendedFor of the fieldmap, add func/sub-001_ses-1_xxx_bold.*</span></span>
<span id="cb1-27"><a href=""></a></span>
<span id="cb1-28"><a href=""></a><span class="co"># once you are happy with the mapping, run bidscoiner</span></span>
<span id="cb1-29"><a href=""></a><span class="ex">bidscoiner</span> <span class="va">$sortedFolder</span> /home/jovyan/completion2/bids</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="bismapper" class="slide level2">
<h2>bismapper</h2>

<img data-src="images/clipboard-3995624064.png" style="width:32.0%" class="r-stretch"><p>Currently, to discover the data we need to delete the content of the “subprefix” field and then save the bids map in the default location. After this, run the same bidsmapper command again.</p>
</section>
<section id="subject-and-session" class="slide level2">
<h2>Subject and session</h2>

<img data-src="images/clipboard-325791456.png" style="width:50.0%" class="r-stretch"><p>Now the bidsmapper discovered everything, but the files are not named correctly.</p>
<p>Edit subject and session first.</p>
<p>Now we need to rename the files by clicking “Edit” next to every file.</p>
</section>
<section id="editing-file-names-anatomical" class="slide level2">
<h2>Editing file names: anatomical</h2>

<img data-src="images/clipboard-1483139836.png" style="width:50.0%" class="r-stretch"><p>anatmprage -&gt; mprage in the “acq” filed</p>
</section>
<section id="editing-file-names-functional" class="slide level2">
<h2>Editing file names: functional</h2>

<img data-src="images/clipboard-103624418.png" style="width:50.0%" class="r-stretch"><p>Edit the task name and acq field</p>
<p>Do this for every functional file</p>
<p>In the intendedFor of the fieldmap, add “func/sub-999_ses-1_task-completion_acq–noise_bold.*” with a wildcard. This will select all respective functional runs</p>
<p>Once you are happy, run bidscoiner to do the actual conversion</p>
</section>
<section id="view-files" class="slide level2">
<h2>View files</h2>

<img data-src="images/clipboard-3124758617.png" class="r-stretch"></section>
<section id="mricron" class="slide level2">
<h2>MRICron</h2>

<img data-src="images/clipboard-2244027224.png" width="446" class="r-stretch"><p>Now you can view the nifti files with any suitable software</p>
</section></section>
<section>
<section id="quality-assurance" class="title-slide slide level1 center">
<h1>3. Quality assurance</h1>

</section>
<section id="mriqc" class="slide level2">
<h2>MRIQC</h2>
<p>MRIQC is a tool used for quality assurance of bids-valid datasets</p>

<img data-src="images/clipboard-1260990723.png" class="r-stretch"></section>
<section id="run" class="slide level2">
<h2>Run</h2>
<h3 id="command-line">Command line</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource bash number-lines code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href=""></a><span class="co"># define relevant paths</span></span>
<span id="cb2-2"><a href=""></a><span class="va">bids_folder</span><span class="op">=</span>/home/jovyan/gambling/bids/</span>
<span id="cb2-3"><a href=""></a><span class="va">mriqc_folder</span><span class="op">=</span>/home/jovyan/gambling/bids/derivatives/mriqc/</span>
<span id="cb2-4"><a href=""></a></span>
<span id="cb2-5"><a href=""></a><span class="co"># create mriqc directory</span></span>
<span id="cb2-6"><a href=""></a><span class="fu">mkdir</span> <span class="at">-p</span> <span class="va">$mriqc_doler</span></span>
<span id="cb2-7"><a href=""></a></span>
<span id="cb2-8"><a href=""></a><span class="co"># run mriqc</span></span>
<span id="cb2-9"><a href=""></a><span class="ex">mriqc</span> <span class="va">$bids_folder</span> <span class="va">$mriqc_folder</span> participant <span class="at">--participant-label</span> 999</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<h3 id="output">Output</h3>

<img data-src="images/clipboard-659925537.png" class="r-stretch"></section>
<section id="references" class="slide level2 smaller scrollable">
<h2>References</h2>

<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-brooks2012" class="csl-entry" role="listitem">
Brooks, Joseph L. 2012. <span>“Counterbalancing for Serial Order Carryover Effects in Experimental Condition Orders.”</span> <em>Psychological Methods</em> 17 (4): 600–614. <a href="https://doi.org/10.1037/a0029310">https://doi.org/10.1037/a0029310</a>.
</div>
<div id="ref-juavinett2022" class="csl-entry" role="listitem">
Juavinett, Ashley L. 2022. <span>“The Next Generation of Neuroscientists Needs to Learn How to Code, and We Need New Ways to Teach Them.”</span> <em>Neuron</em> 110 (4): 576–78. <a href="https://doi.org/10.1016/j.neuron.2021.12.001">https://doi.org/10.1016/j.neuron.2021.12.001</a>.
</div>
</div>
</section></section>

    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="logo/logo.png" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="data_management_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="data_management_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="data_management_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="data_management_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="data_management_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="data_management_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="data_management_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="data_management_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="data_management_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="data_management_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="data_management_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>